(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{429:function(e,t,n){"use strict";n.r(t);n(7),n(4),n(13),n(45);var r={data:function(){return{descriptionLimit:60,entries:[],prepared:!1,isLoading:!1,model:{code:"BJP",station:"北京",city:"北京市",province:"北京市"},model2:{code:"SZQ",station:"深圳",city:"深圳市",province:"广东省"},deptSearch:null,termiSearch:null,searched:null,date:(new Date).toISOString().substr(0,10),menu:!1,dataTableLoading:!1,lines:[],tableHeaders:[{text:"F.Tr.No",align:"left",sortable:!1,value:"first_train"},{text:"S.Tr.No",align:"left",sortable:!1,value:"second_train"},{text:"Dep",value:"dep_station",align:"left",sortable:!1},{text:"Via",value:"via_station",align:"left",sortable:!1},{text:"Arr",value:"arr_station",align:"left",sortable:!1},{text:"F.Dep.T",value:"first_dep_time",align:"left",sortable:!1},{text:"F.Arr.T",value:"first_arr_time",align:"left",sortable:!1},{text:"S.Dep.T",value:"second_dep_time",align:"left",sortable:!1},{text:"S.Arr.T",value:"second_arr_time",align:"left",sortable:!1},{text:"Time",value:"total_time_in_hour",align:"left",sort:function(a,b){var e=function(a){var e=a.split("h");return 1===e.length?Number(e[0].split("m")[0]):60*Number(e[0])+Number(e[1].split("m")[0])};return e(a)-e(b)}},{text:"Transfer",value:"transfer_time_in_hour",align:"left",sort:function(a,b){var e=function(a){var e=a.split("h");return 1===e.length?Number(e[0].split("m")[0]):60*Number(e[0])+Number(e[1].split("m")[0])};return e(a)-e(b)}}],exactQuery:2,tableCount:0,dialog:!1,tobuy:{},tobuy_types:[],tobuy_types_length:0,radioGroup:0,passengerItems:[],selectedPassengers:[],sucessTicktInfoDialog:!1,sucessPassengers:[],option:[{text:"City",value:0},{text:"Precise",value:1},{text:"Expand",value:2}],timeTable:null,timeTableDialog:!1,searchTimeTableNo:null}},computed:{items:function(){var e=this;return this.entries.map((function(t){var n=t.station.length>e.descriptionLimit?t.station.slice(0,e.descriptionLimit)+"...":t.station;return Object.assign({},t,{station:n})}))}},watch:{deptSearch:function(e){},termiSearch:function(e){}},mounted:function(){var e=this;fetch("/stations.json").then((function(e){return e.json()})).then((function(t){var n=t.result_cnt,r=t.result;e.count=n,e.entries=r})).catch((function(e){console.log(e)})).finally((function(){return e.isLoading=!1})),fetch("/api/passenger").then((function(e){return e.json()})).then((function(t){var n=t.result;e.passengerItems=n})).catch((function(e){console.log(e)})).finally(this.prepared=!0)},methods:{search:function(){var e=this;this.dataTableLoading=!0,this.lines=[];var t=new Date;this.searched=!0;var n="/api/transfer?dep="+this.model.code+"&arr="+this.model2.code+"&date="+this.date.split("-").join("")+"&exact="+this.exactQuery;fetch(n).then((function(e){return e.json()})).then((function(n){var r=n.result_cnt,l=n.result;if(e.date===t.toISOString().substr(0,10)){e.lines=[];for(var i=0;i<l.length;i++)e.time_cmp(t.getHours(),t.getMinutes(),l[i].first_dep_time,30)&&e.lines.push(l[i]);e.tableCount=e.lines.length}else e.tableCount=r,e.lines=l;for(var o=0;o<e.lines.length;o++)e.process(e.lines[o]),e.lines[o].id=o})).catch((function(e){console.log(e)})).finally((function(){return e.dataTableLoading=!1}))},more_then_day:function(e,t){var dd=e.split(":"),n=Number(dd[0]),r=Number(dd[1]);return Math.floor((60*n+r+t)/1440)},process:function(e){var t=Math.floor(e.total_time/60);e.total_time_in_hour=t?t+"h"+e.total_time%60+"m":e.total_time%60+"m";var n=Math.floor(e.transfer_time/60),r=e.transfer_time%60;e.transfer_time_in_hour=n?n+"h"+r%60+"m":r+"m"},time_cmp:function(e,t,b,n){var r=b.split(":");return 60*e+t+n<60*Number(r[0])+Number(r[1])},getTimeTable:function(e){var t=this;fetch("/api/timetable?train_code="+e).then((function(e){return e.json()})).then((function(e){var n=e.result;t.timeTable=n})).catch((function(e){console.log(e)})).finally(),this.timeTableDialog=!0,this.searchTimeTableNo=e}}},l=n(72),o=n(99),c=n.n(o),d=n(423),m=n(156),v=n(141),f=n(80),_=n(425),h=n(424),x=n(342),T=n(362),y=n(91),S=n(359),k=n(140),V=n(360),C=n(363),D=n(364),N=n(358),w=n(392),L=n(346),I=n(328),component=Object(l.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",[n("v-flex",{staticClass:"text-center"},[n("img",{staticClass:"mb-5",attrs:{src:"/v.png",alt:"Vuetify.js"}}),e._v(" "),n("blockquote",{staticClass:"blockquote"},[n("v-card",{attrs:{loading:!e.prepared}},[n("v-card-title",{staticClass:"headline green lighten-2"},[e._v("\n          Transfer Search\n        ")]),e._v(" "),n("v-card-text",[n("v-row",[e.prepared?n("v-autocomplete",{attrs:{items:e.items,loading:e.isLoading,"search-input":e.deptSearch,"hide-no-data":"","hide-selected":"","item-text":"station","item-value":"API",label:"Departure",placeholder:"Start typing to Search","prepend-icon":"mdi-airplane-takeoff","return-object":""},on:{"update:searchInput":function(t){e.deptSearch=t},"update:search-input":function(t){e.deptSearch=t}},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}}):e._e(),e._v(" "),e.prepared?n("v-autocomplete",{attrs:{items:e.items,loading:e.isLoading,"search-input":e.termiSearch,"hide-no-data":"","hide-selected":"","item-text":"station","item-value":"API",label:"Arrival",placeholder:"Start typing to Search","prepend-icon":"mdi-airplane-landing","return-object":""},on:{"update:searchInput":function(t){e.termiSearch=t},"update:search-input":function(t){e.termiSearch=t}},model:{value:e.model2,callback:function(t){e.model2=t},expression:"model2"}}):e._e(),e._v(" "),n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.date,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(t){e.date=t},"update:return-value":function(t){e.date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Date","prepend-icon":"event",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:"",min:(new Date).toISOString().substr(0,10)},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.date)}}},[e._v("OK")])],1)],1),e._v(" "),e.prepared?n("v-select",{attrs:{items:e.option,"item-text":"text","item-value":"value",label:"Advanced Options","prepend-icon":"mdi-apple-keyboard-option"},model:{value:e.exactQuery,callback:function(t){e.exactQuery=t},expression:"exactQuery"}}):e._e()],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{disabled:e.dataTableLoading||!e.model&&!e.model2},on:{click:function(t){e.model=e.model2=e.searched=null}}},[e._v("\n            Clear\n            "),n("v-icon",{attrs:{right:""}},[e._v("mdi-close-circle")])],1),e._v(" "),n("v-btn",{attrs:{disabled:e.dataTableLoading||!e.model||!e.model2},on:{click:e.search}},[e._v("\n            Search\n            "),n("v-icon",{attrs:{right:""}},[e._v("mdi-magnify")])],1)],1),e._v(" "),n("v-expand-transition",[e.searched?n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.tableHeaders,items:e.lines,loading:e.dataTableLoading,"item-key":"id"},scopedSlots:e._u([{key:"item.first_train",fn:function(t){var r=t.item;return[n("div",{on:{click:function(t){return e.getTimeTable(r.first_train)}}},[n("u",[e._v(e._s(r.first_train)+" ")])])]}},{key:"item.second_train",fn:function(t){var r=t.item;return[n("div",{on:{click:function(t){return e.getTimeTable(r.second_train)}}},[n("u",[e._v(e._s(r.second_train)+" ")])])]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.buyItem(r)}}},[e._v("\n                mdi-currency-usd\n              ")])]}}],null,!1,3052104322)}):e._e()],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.timeTableDialog,callback:function(t){e.timeTableDialog=t},expression:"timeTableDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Time Table for "+e._s(e.searchTimeTableNo))]),e._v(" "),n("v-simple-table",{attrs:{dense:""},scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v("Station")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("Arr.T")]),e._v(" "),n("th",{staticClass:"text-left"},[e._v("Dep.T")])])]),e._v(" "),n("tbody",e._l(e.timeTable,(function(t){return n("tr",{key:t.station},[n("td",[e._v(e._s(t.station))]),e._v(" "),n("td",[e._v(e._s(t.arr_time))]),e._v(" "),n("td",[e._v(e._s(t.dep_time))])])})),0)]},proxy:!0}])})],1)],1)],1)],1)])],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VAutocomplete:d.a,VBtn:m.a,VCard:v.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VDataTable:_.a,VDatePicker:h.a,VDialog:x.a,VDivider:T.a,VExpandTransition:y.a,VFlex:S.a,VIcon:k.a,VLayout:V.a,VMenu:C.a,VRow:D.a,VSelect:N.a,VSimpleTable:w.a,VSpacer:L.a,VTextField:I.a})}}]);